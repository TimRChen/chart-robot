{"version":3,"sources":["src/draw.js"],"names":["canvas","document","createElement","ctx","getContext","vpx","width","vpy","height","Radius","LayerBallNum","LayerIntervalUp","balls","angleX","Math","PI","angleY","window","addEventListener","event","x","clientX","offsetLeft","y","clientY","offsetTop","Animation","init","prototype","isrunning","num","i","l","layer","draw","start","animate","stop","clearRect","rotateHandler","rotateX","rotateY","rotateZ","length","paint","animation","requestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","mozRequestAnimationFrame","up","radius","sqrt","pow","cos","setBalls","angle","b","ball","sin","push","beginPath","arc","strokeStyle","stroke","z","r","fl","save","scale","alpha","fillStyle","fill","restore","y1","z1","x1","setAttribute","style","position","bottom","right","transform","body","getElementsByTagName","appendChild"],"mappings":"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","file":"draw.2984e400.map","sourcesContent":["/*******************************\n * 机器人绘制工具\n * @author TimRChen\n * update: 2018/04/03\n *******************************/\n\nvar canvas = document.createElement(\"canvas\"),\n    ctx = canvas.getContext(\"2d\"),\n    vpx = canvas.width/2,\n    vpy = canvas.height,\n    Radius = 150, // 机器人半径\n    LayerBallNum = 360 / 15,\n    LayerIntervalUp = 360 / 15,\n    balls = [],\n    angleX = Math.PI/100,\n    angleY = Math.PI/100;\n\nwindow.addEventListener(\"mousemove\" , function (event) {\n    var x = event.clientX - canvas.offsetLeft - vpx;\n    var y = event.clientY - canvas.offsetTop - vpy;\n\n    angleY = -x*0.0001;\n    angleX = -y*0.0001;\n});\n\nvar Animation = function () {\n    this.init();\n};\n\nAnimation.prototype = {\n    isrunning: false,\n    init: function () {\n        var num = LayerIntervalUp / 2; //layer 的数目 假定每一层 间隔30  画上半球\n        for (var i = 0; i <=num; i++) {\n            var l = new layer(i, 1);\n            l.draw();\n            var l = new layer(i, -1);\n            l.draw();\n        }\n\n    },\n    start:function(){\n        this.isrunning = true;\n        animate();\n    },\n    stop:function(){\n        this.isrunning = false;\n    }\n}\n\nfunction animate(){\n    ctx.clearRect(0,0,canvas.width, canvas.height);\n    rotateHandler.rotateX();\n    rotateHandler.rotateY();\n    rotateHandler.rotateZ();\n\n    for(var i=0; i < balls.length; i++) {\n        balls[i].paint();\n    }\n    if(animation.isrunning) {\n        if(\"requestAnimationFrame\" in window){\n            requestAnimationFrame(animate);\n        }\n        else if(\"webkitRequestAnimationFrame\" in window){\n            webkitRequestAnimationFrame(animate);\n        }\n        else if(\"msRequestAnimationFrame\" in window){\n            msRequestAnimationFrame(animate);\n        }\n        else if(\"mozRequestAnimationFrame\" in window){\n            mozRequestAnimationFrame(animate);\n        }\n    }\n}\n\n\nvar layer = function (num, up) {\n    this.radius = Math.sqrt(Math.pow(Radius,2) - Math.pow(Radius * Math.cos(num * Math.PI * 2 / LayerBallNum), 2))\n    this.x = 0;\n    this.y = 0;\n    this.up = up;\n}\n\nlayer.prototype = {\n    setBalls: function (radius) {\n        for(var i=0; i<LayerBallNum; i++){\n            var angle =  2 * Math.PI / LayerBallNum * i;\n            var b = new ball(radius * Math.cos(angle), radius * Math.sin(angle), this.up * Math.sqrt(Math.pow(Radius, 2) - Math.pow(radius, 2)), 1.5);\n            b.paint();\n            balls.push(b);\n        }\n\n    },\n    draw: function () {\n        ctx.beginPath();\n        ctx.arc(vpx, vpy, this.radius , 0, 2*Math.PI, true);\n        ctx.strokeStyle = \"#FFF\";\n        ctx.stroke();\n        this.setBalls(this.radius);\n    }\n}\n\nvar ball = function (x , y , z , r) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.r = r;\n    this.width = 2*r;\n}\n\nball.prototype = {\n    paint:function(){\n        var fl = 450 //焦距\n        ctx.save();\n        ctx.beginPath();\n        var scale = fl / (fl - this.z);\n        var alpha = (this.z+Radius)/(2*Radius);\n        ctx.arc(vpx + this.x, vpy + this.y, this.r*scale , 0 , 2*Math.PI , true);\n        ctx.fillStyle = \"rgba(255, 255, 255,\" + (alpha + 0.5) + \")\"; // 填充颜色\n        ctx.fill();\n        ctx.restore();\n    }\n}\n\nvar rotateHandler = {\n    rotateX: function () {\n        var cos = Math.cos(angleX);\n        var sin = Math.sin(angleX);\n        for(var i=0; i<balls.length; i++){\n            var y1 = balls[i].y * cos - balls[i].z * sin;\n            var z1 = balls[i].z * cos + balls[i].y * sin;\n            balls[i].y = y1;\n            balls[i].z = z1;\n        }\n    },\n    rotateY: function () {\n        var cos = Math.cos(angleY);\n        var sin = Math.sin(angleY);\n        for(var i=0; i<balls.length; i++){\n            var x1 = balls[i].x * cos - balls[i].z * sin;\n            var z1 = balls[i].z * cos + balls[i].x * sin;\n            balls[i].x = x1;\n            balls[i].z = z1;\n        }\n    },\n    rotateZ: function () {\n        var cos = Math.cos(angleY);\n        var sin = Math.sin(angleY);\n        for(var i=0; i<balls.length; i++){\n            var x1 = balls[i].x * cos - balls[i].y * sin;\n            var y1 = balls[i].y * cos + balls[i].x * sin;\n            balls[i].x = x1;\n            balls[i].y = y1;\n        }\n    }\n};\n\n/**\n * 机器人UI大小\n */\ncanvas.setAttribute('width', '300');\ncanvas.setAttribute('height', '300');\ncanvas.style.position = 'fixed';\ncanvas.style.bottom = '0';\ncanvas.style.right = '0';\ncanvas.style.transform = 'scale(0.5)';\n\nvar body = document.getElementsByTagName('body')[0];\nbody.appendChild(canvas);\n\nexport default Animation;\n"]}